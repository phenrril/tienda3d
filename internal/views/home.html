{{define "home.html"}}
{{template "layout_start" .}}
<section class="hero hero-split">
  <div class="hero-copy">
    <h1 class="mega">Dale vida a tus ideas en 3D</h1>
    <p class="lead">Modelos impresos de alta calidad listos para enviar o fabricar bajo demanda. Personalizá materiales, colores y terminaciones.</p>
    <div class="hero-actions">
      <a href="/products" class="btn-primary">Ver catálogo</a>
      <a href="/contact" class="btn-secondary">Consultas</a>
    </div>
    <p class="hero-hours">Producción diaria • Envíos a todo el país • Soporte personalizado</p>
  </div>
  <div class="hero-carousel" id="heroCarousel">
    <img class="hc-slide active" src="/public/assets/img/img1.webp" alt="Modelo 3D 1" />
    <img class="hc-slide" src="/public/assets/img/img2.webp" alt="Modelo 3D 2" />
    <img class="hc-slide" src="/public/assets/img/img3.webp" alt="Modelo 3D 3" />
    <img class="hc-slide" src="/public/assets/img/img4.webp" alt="Modelo 3D 4" />
    <div class="hc-dots" id="hcDots"></div>
  </div>
</section>
<script>
(function(){
  const slides=[...document.querySelectorAll('#heroCarousel .hc-slide')];
  const dotsC=document.getElementById('hcDots');
  slides.forEach((_,i)=>{const d=document.createElement('div');d.className='dot'+(i===0?' active':'');d.dataset.i=i;d.onclick=()=>go(i,true);dotsC.appendChild(d);});
  let idx=0, timer=null;function go(n,manual){slides[idx].classList.remove('active');dotsC.children[idx].classList.remove('active');idx=(n+slides.length)%slides.length;slides[idx].classList.add('active');dotsC.children[idx].classList.add('active');if(manual){restart();}}
  function next(){go(idx+1);}function start(){timer=setInterval(next,3000);}function restart(){clearInterval(timer);start();}
  start();
})();
</script>

<section style="margin-top:40px">
  <h2 class="title" style="margin-bottom:10px">Destacados</h2>
  <div class="cards">
    {{range .Products}}
    <div class="card">
      <div class="card-media">
        {{if .Images}}
          <img src="{{(index .Images 0).URL}}" alt="{{(index .Images 0).Alt}}" />
        {{else}}<div class="placeholder">IMG</div>{{end}}
        <div class="badges">{{if .ReadyToShip}}<span class="badge green">En stock</span>{{end}}</div>
      </div>
      <div class="card-body">
        <h3 class="card-title"><a href="/product/{{.Slug}}">{{.Name}}</a></h3>
        <div class="card-meta">{{.Category}}</div>
        <div class="price-row"><span class="price">${{printf "%.0f" .BasePrice}}</span></div>
        <div class="actions"><a href="/product/{{.Slug}}" class="btn-secondary small">Ver</a></div>
      </div>
    </div>
    {{end}}
  </div>
</section>
{{template "layout_end" .}}
{{end}}
